"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[391],{8288:function(e,n,t){t.r(n);var r=t(9268),s=t(6006),i=t(6394),o=t.n(i),c=t(9699),l=t(6752),a=t.n(l),d=t(9714),u=t(6944),h=t(1614);let m=e=>{let{card:n}=e,[t,i]=(0,s.useState)(n.isFlipped),[l,d]=(0,s.useState)({x:0,y:0}),[u,m]=(0,s.useState)(0),[x,p]=(0,s.useState)(!1),{socketRef:f,setDeck:g}=(0,h.useSocketContext)();return(0,r.jsx)(a(),{onStart:(e,t)=>{if(f.current){if(null===n.owner)n.owner=f.current.id,f.current.emit("ownerDefined",n);else if(n.owner!==f.current.id){p(!0);return}}},onStop:(e,t)=>{f.current&&(p(!1),n.owner=null,console.log(n.owner),f.current.emit("ownerDefined",n))},onDrag:(e,t)=>{if(f.current){var r;n.position={x:t.x,y:t.y},g(e=>{let t=e.cards.map(e=>e.suit===n.suit&&e.number===n.number?n:e);return new c.$(t)}),null===(r=f.current)||void 0===r||r.emit("updateCardPosition",n)}},disabled:x,position:n.position,children:(0,r.jsx)("div",{className:"z-999 absolute",children:(0,r.jsx)("div",{onMouseDown:e=>{d({x:e.clientX,y:e.clientY})},onMouseUp:e=>{let t=Math.sqrt(Math.pow(e.clientX-l.x,2)+Math.pow(e.clientY-l.y,2));t<5&&(n.flip(),i(n.isFlipped),console.log("card",n.isFlipped),f.current&&f.current.emit("flipCard",n))},onMouseMove:e=>{},style:{transform:"rotate(".concat(u,"deg)")},children:n.isFlipped?(0,r.jsx)(o(),{src:n.getImage(),alt:"Card Image",width:50,height:75,draggable:!1}):(0,r.jsx)(o(),{src:"/cards_images/back.jpg",alt:"Card Image",width:50,height:75,draggable:!1})})})})};n.default=()=>{let[e,n]=(0,s.useState)(!0),{socketRef:t,deck:i,setDeck:o,multiPlayerSettings:l,setMultiPlayerSettings:a}=(0,h.useSocketContext)(),x=e=>{let n=new c.Z(e.suit,e.number,e.isFlipped,e.position,e.owner);o(e=>{let t=e.cards.map(e=>e.suit===n.suit&&e.number===n.number&&e.cardType===n.cardType?n:e);return new c.$(t)})};return(0,s.useEffect)(()=>{var e,n,r,s,i,l,d;null===(e=t.current)||void 0===e||e.on("deck",e=>{let n=c.$.deckFromSocket(e);o(n),console.log(n)}),null===(n=t.current)||void 0===n||n.on("multiPlayerSettings",e=>{a(e)}),null===(r=t.current)||void 0===r||r.on("multiPlayerSettingsUpdated",e=>{a(e)}),null===(s=t.current)||void 0===s||s.on("deckReset",e=>{let n=c.$.deckFromSocket(e);o(n)}),null===(i=t.current)||void 0===i||i.on("ownerUpdated",e=>{x(e)}),null===(l=t.current)||void 0===l||l.on("cardPositionUpdated",e=>{x(e)}),null===(d=t.current)||void 0===d||d.on("cardFlipped",e=>{x(e)})},[]),(0,r.jsxs)(r.Fragment,{children:[e&&(0,r.jsx)("div",{className:"absolute",style:{top:"47.6%",left:"49.5%"},children:(0,r.jsxs)("fieldset",{className:"border-2 rounded w-16 h-24",children:[(0,r.jsx)("legend",{children:"Deck"}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(d.Z,{onClick:()=>{n(!1)},children:(0,r.jsx)(u.Z,{fontSize:"large"})})})]})}),i.cards.map((e,n)=>(0,r.jsx)(m,{card:e},n))]})}},9699:function(e,n,t){var r,s,i,o,c,l;t.d(n,{$:function(){return d},Z:function(){return a}}),(o=r||(r={}))[o.Clubs=0]="Clubs",o[o.Spades=1]="Spades",o[o.Hearts=2]="Hearts",o[o.Diamonds=3]="Diamonds",o[o.Joker=4]="Joker",(c=s||(s={}))[c.Ace=0]="Ace",c[c.Two=1]="Two",c[c.Three=2]="Three",c[c.Four=3]="Four",c[c.Five=4]="Five",c[c.Six=5]="Six",c[c.Seven=6]="Seven",c[c.Eight=7]="Eight",c[c.Nine=8]="Nine",c[c.Ten=9]="Ten",c[c.Jack=10]="Jack",c[c.Queen=11]="Queen",c[c.King=12]="King",c[c.Joker=13]="Joker",(l=i||(i={}))[l.Regular=0]="Regular",l[l.Joker1=1]="Joker1",l[l.Joker2=2]="Joker2";class a{flip(){this.isFlipped=!this.isFlipped}getImage(){if(this.cardType===i.Joker1)return"cards_images/Joker1.svg";if(this.cardType===i.Joker2)return"cards_images/Joker2.svg";{let e=r[this.suit],n=s[this.number];return"cards_images/".concat(e,"-").concat(n,".svg")}}static cardFromSocket(e){let n=new a(e.suit,e.number,e.cardType,e.isFlipped,e.position,e.owner);return n}constructor(e,n,t,r=!1,s={x:720,y:410},i=null){this.suit=e,this.number=n,this.cardType=t,this.isFlipped=r,this.position=s,this.owner=i}}class d{addJokers(){this.cards.push(new a(r.Joker,s.Joker,i.Joker1)),this.cards.push(new a(r.Joker,s.Joker,i.Joker2))}draw(){return this.cards.pop()}shuffle(){let e=[...this.cards];for(let n=e.length-1;n>0;n--){let t=Math.floor(Math.random()*(n+1));[e[n],e[t]]=[e[t],e[n]]}return this.cards=e,this}static deckFromSocket(e){let n=e.cards.map(e=>a.cardFromSocket(e));return new d(n)}constructor(e){if(this.cards=[],e)this.cards=e;else for(let e=0;e<Object.keys(r).length/2-1;e++)for(let n=0;n<Object.keys(s).length/2-1;n++)this.cards.push(new a(e,n,i.Regular))}}},1794:function(e,n,t){t.r(n),t.d(n,{default:function(){return H}});var r=t(2805),s=t(9268),i=t(6006),o=t(2199),c=t(2122),l=t(186),a=t(9734),d=t(706),u=t(7586),h=t(1771),m=t(3210),x=t(8350),p=t(7052),f=t(5621),g=t(1561),j=t(9704),v=t(6578),Z=t(1396),b=t(4066),k=t(7931),y=t(4240),w=t(8947),P=t(6008),S=t(6394),C=t.n(S),F=t(1614);function N(){let e=(0,r._)(["\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 400px;\n    height: 400px;\n    /* border: 2px solid #000; */\n    box-shadow: 0px 0px 24px 0px rgba(0,0,0,0.75);"]);return N=function(){return e},e}function J(){let e=(0,r._)(["\n    font-size: 0.8rem;\n    color: #FFFFFF;\n    border: 2px solid #144D00;\n    border-radius: 25px;\n    width: 8rem;\n    height: 2.5rem;\n"]);return J=function(){return e},e}function I(){let e=(0,r._)(["\n    font-size: 1.75rem;\n"]);return I=function(){return e},e}function R(){let e=(0,r._)(["\n    border: 2px solid #144D00;\n    .MuiInputBase-input {\n        color: #FFFFFF;\n    }\n    .MuiOutlinedInput-root {\n        &.Mui-focused fieldset {\n            border-color: #FFFFFF;\n        }\n    }\n"]);return R=function(){return e},e}let T=(0,o.ZP)(h.Z)(N()),_=(0,o.ZP)(k.Z)(J()),M=(0,o.ZP)(y.Z)(I()),D=(0,o.ZP)(Z.Z)(R());function B(){let e=(0,i.useRef)(),n=(0,i.useRef)(),[t,r]=(0,i.useState)(!1),[o,c]=(0,i.useState)(!1),[l,a]=(0,i.useState)(!1),[d,u]=(0,i.useState)(!1),[h,m]=(0,i.useState)(!1),{socketRef:x,deck:p,setDeck:f,multiPlayerSettings:g}=(0,F.useSocketContext)(),j=(0,P.useRouter)();return(0,s.jsxs)(T,{children:[(0,s.jsx)(C(),{src:"/modal_image.png",alt:"modal image",width:400,height:400,unoptimized:!0}),(0,s.jsx)("div",{style:{position:"absolute",top:"7%",textAlign:"center",width:400,height:380},children:(0,s.jsxs)(b.ZP,{container:!0,children:[(0,s.jsx)(b.ZP,{item:!0,xs:12,sx:{marginBottom:"1.75rem"},children:(0,s.jsx)(M,{children:"Multiplayer Mode"})}),o&&(0,s.jsx)(b.ZP,{container:!0,alignItems:"center",justifyContent:"center",children:(0,s.jsx)(b.ZP,{item:!0,xs:8,sx:{marginBottom:"1.75rem"},children:(0,s.jsx)(w.Z,{variant:"standard",severity:"error",children:"This room ID is already taken!"})})}),l&&(0,s.jsx)(b.ZP,{container:!0,alignItems:"center",justifyContent:"center",children:(0,s.jsx)(b.ZP,{item:!0,xs:8,sx:{marginBottom:"1.75rem"},children:(0,s.jsx)(w.Z,{variant:"standard",severity:"error",children:"Room ID does not exist!"})})}),d&&(0,s.jsx)(b.ZP,{container:!0,alignItems:"center",justifyContent:"center",children:(0,s.jsx)(b.ZP,{item:!0,xs:8,sx:{marginBottom:"1.75rem"},children:(0,s.jsx)(w.Z,{variant:"standard",severity:"error",children:"Password does not match!"})})}),t&&(0,s.jsx)(b.ZP,{container:!0,alignItems:"center",justifyContent:"center",children:(0,s.jsx)(b.ZP,{item:!0,xs:8,sx:{marginBottom:"1.75rem"},children:(0,s.jsx)(w.Z,{variant:"standard",severity:"success",children:"Creating a room!"})})}),h&&(0,s.jsx)(b.ZP,{container:!0,alignItems:"center",justifyContent:"center",children:(0,s.jsx)(b.ZP,{item:!0,xs:8,sx:{marginBottom:"1.75rem"},children:(0,s.jsx)(w.Z,{variant:"standard",severity:"success",children:"Joining a room!"})})}),(0,s.jsx)(b.ZP,{item:!0,xs:12,sx:{marginBottom:"1.5rem"},children:(0,s.jsx)(D,{size:"small",inputRef:e,inputProps:{sx:{width:180}},InputLabelProps:{style:{color:"#fff"}},label:"Room ID",variant:"outlined"})}),(0,s.jsx)(b.ZP,{item:!0,xs:12,sx:{marginBottom:"1.75rem"},children:(0,s.jsx)(D,{size:"small",inputRef:n,inputProps:{sx:{width:180}},InputLabelProps:{style:{color:"#fff"}},label:"Password",variant:"outlined"})}),(0,s.jsx)(b.ZP,{item:!0,xs:12,children:(0,s.jsxs)(b.ZP,{container:!0,justifyContent:"center",alignItems:"center",spacing:4,children:[(0,s.jsx)(b.ZP,{item:!0,children:(0,s.jsx)(_,{onClick:function(){var t,r;let s=null===(t=e.current)||void 0===t?void 0:t.value,i=null===(r=n.current)||void 0===r?void 0:r.value;s&&i&&function(e,n,t,r,s,i,o,c,l){if(e.current){var a;null===(a=e.current)||void 0===a||a.connect(),e.current.emit("join",{roomId:r,roomPassword:s},e=>{"Room does not exist!"==e?(o(!1),i(!0)):"Password does not match!"==e?(i(!1),o(!0)):(c(!0),setTimeout(()=>{l.push(r)},2e3))}),console.log(e.current)}}(x,0,0,s,i,a,u,m,j)},variant:"outlined",children:"Join"})}),(0,s.jsx)(b.ZP,{item:!0,children:(0,s.jsx)(_,{onClick:function(){var t,s;let i=null===(t=e.current)||void 0===t?void 0:t.value,o=null===(s=n.current)||void 0===s?void 0:s.value;i&&o&&function(e,n,t,r,s,i,o,c){if(e.current){var l,a;null===(l=e.current)||void 0===l||l.connect(),null===(a=e.current)||void 0===a||a.emit("createRoom",{roomId:r,roomPassword:s,deck:n,multiPlayerSettings:t},e=>{"This room Id is already taken!"==e?i(!0):(o(!0),setTimeout(()=>{c.push(r)},2e3))}),console.log(e.current)}}(x,p,g,i,o,c,r,j)},variant:"outlined",children:"Create"})})]})})]})})]})}function z(){let e=(0,r._)(["\n  position: absolute;\n  top: 0.1%;\n  left: 0.5%;\n"]);return z=function(){return e},e}function E(){let e=(0,r._)(["\n  display: flex;\n  transition: max-width 0.75s ease-in-out;\n  overflow: hidden;\n\n  &.closed {\n    max-width: 2.5rem; \n  }\n\n  &.open {\n    max-width: 10rem;\n  }\n"]);return E=function(){return e},e}function $(){let e=(0,r._)(["\n  &.closed {\n    transition: border-radius 0.1s ease-in-out;\n    transition-delay: 0.75s;\n    border-radius: 50%;\n  }\n\n  &.open {\n    border-radius: 50% 0 0 50%;\n  }\n"]);return $=function(){return e},e}function A(){let e=(0,r._)(["\n  transition: opacity 0.75s ease-in-out, visibility 0.75s;\n  &.closed {\n    opacity: 0;\n    visibility: hidden;\n  }\n\n  &.open {\n    opacity: 1;\n    visibility: visible;\n  }\n"]);return A=function(){return e},e}let O=(0,o.ZP)(h.Z)(z()),U=(0,o.ZP)(m.Z)(E()),L=(0,o.ZP)(x.ZP)($()),Y=(0,o.ZP)(x.ZP)(A());function H(){let[e,n]=(0,i.useState)(!1),[t,r]=(0,i.useState)(!1),o=(0,P.useRouter)(),h=(0,P.usePathname)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(O,{children:(0,s.jsxs)(U,{className:t?"open":"closed",children:[(0,s.jsx)(L,{disablePadding:!0,className:"bg-gray-100 hover:bg-gray-300 ".concat(t?"open":"closed"),children:(0,s.jsx)(p.Z,{onClick:()=>{r(!t)},className:"p-0 h-10 w-10 items-center justify-center",children:(0,s.jsx)(f.Z,{className:"min-w-0",children:t?(0,s.jsx)(v.Z,{}):(0,s.jsx)(j.Z,{})})})}),(0,s.jsx)(g.Z,{title:"Account",children:(0,s.jsx)(Y,{disablePadding:!0,className:"bg-gray-100 hover:bg-gray-300 ".concat(t?"open":"closed","}"),children:(0,s.jsx)(p.Z,{className:"p-0 h-10 w-10 items-center justify-center",children:(0,s.jsx)(f.Z,{className:"min-w-0",children:(0,s.jsx)(c.Z,{color:"success"})})})})}),(0,s.jsx)(g.Z,{title:"Settings",children:(0,s.jsx)(Y,{disablePadding:!0,className:"bg-gray-100 hover:bg-gray-300 ".concat(t?"open":"closed","}"),children:(0,s.jsx)(p.Z,{onClick:()=>{o.push("".concat(h,"/settings"))},className:"p-0 h-10 w-10 items-center justify-center",children:(0,s.jsx)(f.Z,{className:"min-w-0",children:(0,s.jsx)(l.Z,{color:"success"})})})})}),"/"===h?(0,s.jsx)(g.Z,{title:"MultiPlayer",children:(0,s.jsx)(Y,{disablePadding:!0,className:"bg-gray-100 hover:bg-gray-300 rounded-r-full ".concat(t?"open":"closed","}"),children:(0,s.jsx)(p.Z,{onClick:()=>n(!0),className:"p-0 h-10 w-10 items-center justify-center",children:(0,s.jsx)(f.Z,{className:"min-w-0",children:(0,s.jsx)(a.Z,{color:"success"})})})})}):(0,s.jsx)(g.Z,{title:"Leave",children:(0,s.jsx)(Y,{disablePadding:!0,className:"bg-gray-100 hover:bg-gray-300 rounded-r-full ".concat(t?"open":"closed","}"),children:(0,s.jsx)(p.Z,{onClick:()=>{o.push("/")},className:"p-0 h-10 w-10 items-center justify-center",children:(0,s.jsx)(f.Z,{className:"min-w-0",children:(0,s.jsx)(u.Z,{color:"success"})})})})})]})}),e&&(0,s.jsx)(d.Z,{open:e,onClose:()=>n(!1),children:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(B,{})})})]})}},6203:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var r=t(9268),s=t(1771),i=t(3210),o=t(8350),c=t(7052),l=t(5621),a=t(1561),d=t(9),u=t(6006),h=t(7931),m=t(9376),x=t(1932),p=t(1358),f=t(5121),g=t(1107),j=t(4066),v=t(4240),Z=t(1614),b=t(9699);function k(e){let{socketRef:n,deck:t,setDeck:s}=(0,Z.useSocketContext)(),[i,o]=(0,u.useState)(!1),c=()=>{e.setResetPopup(!1)};return(0,r.jsx)("div",{children:(0,r.jsxs)(m.Z,{open:e.resetPopup,onClose:c,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,r.jsx)(p.Z,{children:(0,r.jsx)(f.Z,{id:"alert-dialog-description",children:"Do you want to reset the card deck?"})}),(0,r.jsxs)(j.ZP,{container:!0,children:[(0,r.jsx)(j.ZP,{item:!0,children:(0,r.jsx)(g.Z,{checked:i,onChange:()=>{o(!i)},inputProps:{"aria-label":"Switch shuffle dialog"}})}),(0,r.jsx)(j.ZP,{item:!0,alignSelf:"center",children:(0,r.jsx)(v.Z,{variant:"subtitle2",children:"Shuffle the deck"})})]}),(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(h.Z,{onClick:c,children:"No"}),(0,r.jsx)(h.Z,{onClick:()=>{s(e=>{if(i)return new b.$().shuffle();{var t;let r=e.cards.map(e=>new b.Z(e.suit,e.number,e.cardType,!1,{x:720,y:410})),s=new b.$(r);return console.log(s),n.current&&(null===(t=n.current)||void 0===t||t.emit("resetDeck",s)),s}}),e.setResetPopup(!1)},children:"Yes"})]})]})})}function y(){let[e,n]=(0,u.useState)(!1),[t,h]=(0,u.useState)(!1),m={pencil:{tooltip:"Pencil",onclick:()=>{h(!0)},icon:(0,r.jsx)(d.Z,{})},reset:{tooltip:"Reset",onclick:()=>{n(!0)},icon:(0,r.jsx)(d.Z,{})}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{position:"absolute",top:"1%",left:"95%",zIndex:"999",children:(0,r.jsx)(i.Z,{sx:{display:"flex"},disablePadding:!0,children:Object.entries(m).map(e=>(0,r.jsx)(a.Z,{title:e[1].tooltip,children:(0,r.jsx)(o.ZP,{className:"bg-gray-100 hover:bg-gray-300 rounded-full",disablePadding:!0,children:(0,r.jsx)(c.Z,{onClick:e[1].onclick,className:"p-0 h-8 w-8 items-center justify-center",children:(0,r.jsx)(l.Z,{className:"min-w-0",children:e[1].icon})})})},e[1].tooltip))})}),e&&(0,r.jsx)(k,{resetPopup:e,setResetPopup:n})]})}},1614:function(e,n,t){t.r(n),t.d(n,{SocketContextProvider:function(){return d},useSocketContext:function(){return u}});var r=t(9268),s=t(6006),i=t(6323),o=t(9699);let c={game:{isJokerIncluded:!1,isShuffleEnabled:!0}},l={theme:{tableColor:"green",cardColor:"blue"},account:{userName:"",password:"",createdRooms:[]}},a=(0,s.createContext)(void 0),d=e=>{let{children:n}=e,t=(0,s.useRef)(null),[d,u]=(0,s.useState)(c),[h,m]=(0,s.useState)(l),[x,p]=(0,s.useState)(new o.$().shuffle());return(0,s.useEffect)(()=>(t.current=(0,i.io)("https://cards-deck-online-8a294773806f.herokuapp.com",{autoConnect:!1}),()=>{var e;null===(e=t.current)||void 0===e||e.disconnect(),console.log("disconnected")}),[]),(0,r.jsx)(a.Provider,{value:{socketRef:t,deck:x,setDeck:p,multiPlayerSettings:d,setMultiPlayerSettings:u,singleModeSettings:h,setSingleModeSettings:m},children:n})},u=()=>{let e=(0,s.useContext)(a);if(!e)throw Error("useSocketContext must be used within a SocketContextProvider");return e}}}]);